# å®Œæ•´ CRUD å°ˆæ¡ˆæ•´åˆï¼ˆNext.js + API + UIï¼‰

âœ” å‰ç«¯ Todo List UIï¼ˆInput / List / Delete / Updateï¼‰  
âœ” å»ºç«‹ Next.js API Routeï¼ˆGET / POST / PUT / DELETEï¼‰  
âœ” å‰å¾Œç«¯æ•´åˆï¼Œåšä¸€å€‹å®Œæ•´ CRUD  
âœ” å¯ä»¥æ­é… localStorage æˆ–æš«å­˜è³‡æ–™


# å°ˆæ¡ˆçµæ§‹ï¼ˆAPI + UIï¼‰

    app/
     â”œ api/
     â”‚    â”” todos/
     â”‚        â”œ route.ts â† API è·¯ç”±
     â”œ page.tsx â† UI
     â”œ TodoInput.tsx â”” TodoList.tsx

# âœ… Step 1ï¼šå»ºç«‹ API Route

### app/api/todos/route.ts

    import { NextRequest, NextResponse } from "next/server";
    
    let todos: { id: number; text: string }[] = [];
    
    export async function GET() {
      return NextResponse.json(todos);
    }
    
    export async function POST(req: NextRequest) {
      const body = await req.json();
      const newTodo = { id: Date.now(), text: body.text };
      todos.push(newTodo);
      return NextResponse.json(newTodo);
    }
    
    export async function DELETE(req: NextRequest) {
      const { id } = await req.json();
      todos = todos.filter(todo => todo.id !== id);
      return NextResponse.json({ ok: true });
    }


-   `GET` â†’ å–å¾— Todo List
    
-   `POST` â†’ æ–°å¢ Todo
    
-   `DELETE` â†’ åˆªé™¤ Todo
    

----------

# âœ… Step 2ï¼šå‰ç«¯æ•´åˆ API

### page.tsx

    "use client";
    import { useState, useEffect } from "react";
    import TodoInput from "./TodoInput";
    import TodoList from "./TodoList";
    
    interface Todo {
      id: number;
      text: string;
    }
    
    export default function Home() {
      const [todos, setTodos] = useState<Todo[]>([]);
    
      // è®€å– Todo List
      useEffect(() => {
        fetch("/api/todos")
          .then(res => res.json())
          .then(data => setTodos(data));
      }, []);
    
      const addTodo = async (text: string) => {
        const res = await fetch("/api/todos", {
          method: "POST",
          body: JSON.stringify({ text }),
        });
        const newTodo = await res.json();
        setTodos([...todos, newTodo]);
      };
    
      const deleteTodo = async (id: number) => {
        await fetch("/api/todos", {
          method: "DELETE",
          body: JSON.stringify({ id }),
        });
        setTodos(todos.filter(todo => todo.id !== id));
      };
    
      return (
        <div className="container">
          <h1>Todo List with API</h1>
          <TodoInput onAdd={addTodo} />
          <TodoList items={todos} onDelete={deleteTodo} />
        </div>
      );
    }


----------

# âœ… Step 3ï¼šTodoInput.tsx

    "use client";
    import { useState } from "react";
    
    type Props = { onAdd: (text: string) => void };
    
    export default function TodoInput({ onAdd }: Props) {
      const [text, setText] = useState("");
    
      const handleAdd = () => {
        if (!text) return;
        onAdd(text);
        setText("");
      };
    
      return (
        <div style={{ display: "flex", marginBottom: "12px" }}>
          <input value={text} onChange={e => setText(e.target.value)} placeholder="è¼¸å…¥å¾…è¾¦äº‹é …" />
          <button onClick={handleAdd}>æ–°å¢</button>
        </div>
      );
    }


----------

# âœ… Step 4ï¼šTodoList.tsx

    type Props = {
      items: { id: number; text: string }[];
      onDelete: (id: number) => void;
    };
    
    export default function TodoList({ items, onDelete }: Props) {
      return (
        <ul>
          {items.map(item => (
            <li key={item.id} style={{ display: "flex", justifyContent: "space-between", marginBottom: "8px" }}>
              <span>{item.text}</span>
              <button onClick={() => onDelete(item.id)}>åˆªé™¤</button>
            </li>
          ))}
        </ul>
      );
    }

----------

# ğŸ¯ æ•ˆæœ

-   é»æ“Šæ–°å¢ â†’ POST API â†’ æ›´æ–°å‰ç«¯
    
-   é»æ“Šåˆªé™¤ â†’ DELETE API â†’ æ›´æ–°å‰ç«¯
    
-   GET API è‡ªå‹•æ‹‰å–ç¾æœ‰ Todo List
    
-   å®Œæ•´ CRUD æµç¨‹ï¼Œå‰å¾Œç«¯åˆ†é›¢
