# React é«˜ç´š Hookï¼ˆuseMemo / useCallbackï¼‰

âœ” å„ªåŒ–æ•ˆèƒ½ï¼Œé¿å…ä¸å¿…è¦é‡æ¸²æŸ“  
âœ” `useMemo` â†’ è¨˜æ†¶è¨ˆç®—çµæœ  
âœ” `useCallback` â†’ è¨˜æ†¶å‡½å¼ï¼Œé¿å… props è§¸ç™¼å­å…ƒä»¶é‡æ¸²æŸ“  
âœ” é©åˆå¤§å‹å°ˆæ¡ˆæˆ– Todo List é€™é¡éœ€è¦é »ç¹æ›´æ–°çš„æƒ…æ³

----------

# ğŸ§  1ï¸âƒ£ useMemo

> è¨˜æ†¶è¨ˆç®—çµæœï¼Œé¿å…æ¯æ¬¡ render éƒ½é‡æ–°è¨ˆç®—

    import { useMemo, useState } from "react";
    
    export default function ExpensiveCalculation() {
      const [count, setCount] = useState(0);
    
      const expensive = useMemo(() => {
        console.log("è¨ˆç®—ä¸­...");
        let total = 0;
        for (let i = 0; i < 100000000; i++) total += i;
        return total;
      }, []); // ç©ºä¾è³´ â†’ åªè¨ˆç®—ä¸€æ¬¡
    
      return (
        <div>
          <p>è¨ˆç®—çµæœï¼š{expensive}</p>
          <p>Count: {count}</p>
          <button onClick={() => setCount(count + 1)}>å¢åŠ  Count</button>
        </div>
      );
    }


âœ… é»æ“Šã€Œå¢åŠ  Countã€æ™‚ï¼Œexpensive ä¸æœƒé‡æ–°è¨ˆç®—

----------

# ğŸ§  2ï¸âƒ£ useCallback

> è¨˜æ†¶å‡½å¼ï¼Œé¿å…æ¯æ¬¡ render éƒ½ç”Ÿæˆæ–°å‡½å¼  
> å°¤å…¶å‚³çµ¦å­å…ƒä»¶ props æ™‚å¾ˆé‡è¦

    import { useState, useCallback } from "react";
    
    type ButtonProps = { onClick: () => void };
    
    function Child({ onClick }: ButtonProps) {
      console.log("Child render");
      return <button onClick={onClick}>Child Button</button>;
    }
    
    export default function Parent() {
      const [count, setCount] = useState(0);
    
      // without useCallback â†’ æ¯æ¬¡ render ç”¢ç”Ÿæ–°å‡½å¼ â†’ Child ä¹Ÿé‡æ–°æ¸²æŸ“
      const handleClick = useCallback(() => {
        setCount((c) => c + 1);
      }, []); // ç©ºä¾è³´ â†’ handleClick æ°¸é ç›¸åŒ
    
      return (
        <div>
          <p>Count: {count}</p>
          <Child onClick={handleClick} />
        </div>
      );
    }


âœ… Child åªæœ‰ç¬¬ä¸€æ¬¡æ¸²æŸ“ï¼Œä¹‹å¾Œä¸æœƒå› ç‚ºçˆ¶å…ƒä»¶ state æ”¹è®Šè€Œé‡æ–° render
