# è¡¨å–®é©—è­‰ + éŒ¯èª¤è™•ç†

âœ” Input é©—è­‰ï¼ˆå¿…å¡«ã€é•·åº¦ã€æ ¼å¼ï¼‰  
âœ” æç¤ºä½¿ç”¨è€…éŒ¯èª¤è¨Šæ¯  
âœ” è¡¨å–®é€å‡ºå‰æª¢æŸ¥  
âœ” å¯ä»¥çµåˆå‰é¢ Todo List API åšå®Œæ•´ç¯„ä¾‹

----------

# ğŸ§± Step 1ï¼šå»ºç«‹ç°¡å–®è¡¨å–®å…ƒä»¶

    "use client";
    import { useState } from "react";
    
    type Props = { onAdd: (text: string) => void };
    
    export default function TodoInput({ onAdd }: Props) {
      const [text, setText] = useState("");
      const [error, setError] = useState("");
    
      const handleAdd = () => {
        // é©—è­‰
        if (!text) {
          setError("ä¸èƒ½ç©ºç™½ï¼");
          return;
        }
        if (text.length < 3) {
          setError("è‡³å°‘ 3 å€‹å­—å…ƒ");
          return;
        }
    
        setError("");
        onAdd(text);
        setText("");
      };
    
      return (
        <div style={{ marginBottom: "12px" }}>
          <input
            value={text}
            onChange={e => setText(e.target.value)}
            placeholder="è¼¸å…¥å¾…è¾¦äº‹é …"
          />
          <button onClick={handleAdd}>æ–°å¢</button>
          {error && <p style={{ color: "red" }}>{error}</p>}
        </div>
      );
    }

 

âœ… ç‰¹é»ï¼š

-   ä½¿ç”¨ `error` state å„²å­˜éŒ¯èª¤è¨Šæ¯
    
-   é©—è­‰ä¸é€šé â†’ é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
    
-   é©—è­‰é€šé â†’ æ¸…ç©º input ä¸¦é€å‡º
    

----------

# ğŸ§± Step 2ï¼šçµåˆ API

    const addTodo = async (text: string) => {
      try {
        const res = await fetch("/api/todos", {
          method: "POST",
          body: JSON.stringify({ text }),
        });
        if (!res.ok) throw new Error("æ–°å¢å¤±æ•—");
        const newTodo = await res.json();
        setTodos([...todos, newTodo]);
      } catch (err: any) {
        alert(err.message); // å¯ä»¥æ›æˆç•«é¢é¡¯ç¤º
      }
    };


-   å‰ç«¯è¡¨å–®é©—è­‰ â†’ é€ API
    
-   API éŒ¯èª¤ â†’ æ•æ‰ä¸¦æç¤ºä½¿ç”¨è€…
    

----------

# ğŸŸ¢ å¿ƒæ³•æ•´ç†

1ï¸âƒ£ **å‰ç«¯é©—è­‰** â†’ ä½¿ç”¨è€…é«”é©—å¥½ï¼Œä¸æœƒé€éŒ¯è³‡æ–™  
2ï¸âƒ£ **å¾Œç«¯é©—è­‰** â†’ API é‚„æ˜¯è¦æª¢æŸ¥ï¼Œé˜²å‘†  
3ï¸âƒ£ **éŒ¯èª¤è¨Šæ¯** â†’ æç¤ºæ¸…æ¥šï¼Œä½ç½®æ˜é¡¯  
4ï¸âƒ£ **state ç®¡ç†** â†’ `error`ã€`loading`ã€`success` éƒ½å¯ä»¥ç”¨ state
